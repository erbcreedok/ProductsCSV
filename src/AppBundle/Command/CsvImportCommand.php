<?php/** * Created by PhpStorm. * User: admin * Date: 13.06.17 * Time: 14:50 */namespace AppBundle\Command;use AppBundle\Entity\Product;use AppBundle\Entity\ProductTest;use AppBundle\Service\CsvImportService;use Doctrine\DBAL\Exception\UniqueConstraintViolationException;use Doctrine\ORM\EntityManagerInterface;use League\Csv\Reader;use Symfony\Bundle\FrameworkBundle\Command\ContainerAwareCommand;use Symfony\Component\Config\Definition\Exception\Exception;use Symfony\Component\Console\Command\Command;use Symfony\Component\Console\Input\InputInterface;use Symfony\Component\Console\Output\OutputInterface;use Symfony\Component\Console\Style\SymfonyStyle;class CsvImportCommand extends ContainerAwareCommand{    /**     * @var EntityManagerInterface     */    private $em;    const COLUMNS = 6;    public function __construct(EntityManagerInterface $em)    {        parent::__construct();        $this->em = $em;    }    protected function configure()    {        $this            ->setName('csv:import')            ->setDescription('Imports the mock CSV data file')        ;    }    protected function execute(InputInterface $input, OutputInterface $output)    {        $io = new SymfonyStyle($input, $output);        $csvImportService = $this->getContainer()->get('csvimporter');        $log = $csvImportService->readFile("%kernel.root_dir%/../src/AppBundle/Data/stock.csv");        $io->success(sprintf("CSV successfully imported %d out of %d values", $log[0], $log[1]));    }}